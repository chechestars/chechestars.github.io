<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title><![CDATA[ubuntu 14.04 下单机安装 hadoop 2.7.2+scala 2.11.8+spark 2.0伪分布式教程]]></title>
      <url>/2017/07/27/ubuntu%2014.04%20%E4%B8%8B%E5%8D%95%E6%9C%BA%E5%AE%89%E8%A3%85%20hadoop%202.7.2+scala%202.11.8+spark%202.0%E4%BC%AA%E5%88%86%E5%B8%83%E5%BC%8F%E6%95%99%E7%A8%8B/</url>
      <content type="html"><![CDATA[<p>听说高大上的spark2.0版本发布啦，凑个热闹来安装一下。<br>﻿本文安装方式及教程截图均基于ubuntu 14.04系统<br><a id="more"></a><br><strong>需要下载以下4个软件：</strong><br>说明：自己尝试发现手动下载这些软件的压缩包再解压到某目录下的方式比命令行稍快一点，后面也有命令行下载方式的说明。此种方式适用于习惯图形界面的童鞋。<br>1.Hadoop-2.7.2.tar.gz 下载网址：<br><a href="http://www-eu.apache.org/dist/hadoop/common/hadoop-2.7.2/hadoop-2.7.2.tar.gz" target="_blank" rel="noopener">http://www-eu.apache.org/dist/hadoop/common/hadoop-2.7.2/hadoop-2.7.2.tar.gz</a><br>2.scala-2.11.8.tgz 下载网址：<br><a href="http://downloads.lightbend.com/scala/2.11.8/scala-2.11.8.tgz" target="_blank" rel="noopener">http://downloads.lightbend.com/scala/2.11.8/scala-2.11.8.tgz</a><br>3.spark-2.0.0-bin-hadoop2.7.tgz 下载网址：<br><a href="http://spark.apache.org/downloads.html" target="_blank" rel="noopener">http://spark.apache.org/downloads.html</a><br><img src="http://img.blog.csdn.net/20160729124041546" alt="这里写图片描述"><br>4.java下载网址：<br><a href="http://download.oracle.com/otn-pub/java/jdk/8u101-b13/jdk-8u101-linux-x64.tar.gz" target="_blank" rel="noopener">http://download.oracle.com/otn-pub/java/jdk/8u101-b13/jdk-8u101-linux-x64.tar.gz</a></p>
<p><strong>一.安装java</strong><br>将java下载后手动解压到/home/che文件夹下（可采用右击压缩包，单击“提取”）<br>在终端（可用Ctrl+Alt+T快捷键打开）中输入：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit <span class="regexp">/etc/</span>profile</span><br></pre></td></tr></table></figure>
<p>在打开的文本中添加：<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="builtin-name">export</span> <span class="attribute">JAVA_HOME</span>=/home/che/jdk1.8.0_101/</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">JRE_HOME</span>=/home/che/jdk1.8.0_101/jre</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="variable">$JAVA_HOME</span>/bin:$JRE_HOME/bin:$PATH</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">CLASSPATH</span>=.:$JAVA_HOME/lib:$JRE_HOME/lib:$CLASSPATH</span><br></pre></td></tr></table></figure></p>
<p><strong>二.配置ssh localhost</strong><br>确保安装好ssh：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get <span class="keyword">update</span></span><br><span class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">install</span> openssh-<span class="keyword">server</span></span><br><span class="line">sudo /etc/init.d/ssh <span class="keyword">start</span></span><br></pre></td></tr></table></figure>
<p>生成并添加密钥：</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">ssh-keygen -t rsa</span></span><br></pre></td></tr></table></figure>
<p><img src="http://img.blog.csdn.net/20160729124238485" alt="这里写图片描述"><br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat ~<span class="regexp">/.ssh/id</span>_rsa.pub <span class="meta">&gt;&gt; </span>~<span class="regexp">/.ssh/authorized</span>_keys</span><br><span class="line">chmod <span class="number">0600</span> ~<span class="regexp">/.ssh/authorized</span>_keys</span><br></pre></td></tr></table></figure></p>
<p>测试ssh localhost<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh localhost</span><br><span class="line"><span class="keyword">exit</span></span><br></pre></td></tr></table></figure></p>
<p><img src="http://img.blog.csdn.net/20160729124416988" alt="这里写图片描述"></p>
<p><strong>三.安装hadoop2.6.0</strong><br>将hadoop2.6.0下载然后手动解压到/home/che文件夹下<br>【或者】执行：<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /home/che</span><br><span class="line">wget http:<span class="comment">//www-eu.apache.org/dist/hadoop/common/hadoop-2.7.2/hadoop-2.7.2.tar.gz</span></span><br><span class="line">tar -xzvf hadoop-<span class="number">2.7</span>.<span class="number">2</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span></span><br></pre></td></tr></table></figure></p>
<p>编辑/etc/profile文件<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit <span class="regexp">/etc/</span>profile</span><br></pre></td></tr></table></figure></p>
<p>添加：<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="builtin-name">export</span> <span class="attribute">HADOOP_HOME</span>=/home/che/hadoop-2.7.2</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">HADOOP_INSTALL</span>=<span class="variable">$HADOOP_HOME</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">HADOOP_MAPRED_HOME</span>=<span class="variable">$HADOOP_HOME</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">HADOOP_COMMON_HOME</span>=<span class="variable">$HADOOP_HOME</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">HADOOP_HDFS_HOME</span>=<span class="variable">$HADOOP_HOME</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">YARN_HOME</span>=<span class="variable">$HADOOP_HOME</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">HADOOP_COMMON_LIB_NATIVE_DIR</span>=<span class="variable">$HADOOP_HOME</span>/lib/native</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="variable">$PATH</span>:$HADOOP_HOME/sbin:$HADOOP_HOME/bin</span><br></pre></td></tr></table></figure></p>
<p>让其生效<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">source</span> <span class="regexp">/etc/</span>profile</span><br></pre></td></tr></table></figure></p>
<p>编辑$HADOOP_HOME/etc/hadoop/hadoop-env.sh文件<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit <span class="variable">$HADOOP_HOME</span><span class="regexp">/etc/</span>hadoop<span class="regexp">/hadoop-env.sh</span></span><br></pre></td></tr></table></figure></p>
<p>添加：<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="builtin-name">export</span> <span class="attribute">JAVA_HOME</span>=/home/che/jdk1.8.0_101/</span><br></pre></td></tr></table></figure></p>
<p>修改core-site.xml文件<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd <span class="variable">$HADOOP_HOME</span><span class="regexp">/etc/</span>hadoop</span><br><span class="line">sudo gedit core-site.xml</span><br></pre></td></tr></table></figure></p>
<p>修改为：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.default.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://localhost:9000<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>修改hdfs-site.xml文件<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">sudo</span> <span class="selector-tag">gedit</span> <span class="selector-tag">hdfs-site</span><span class="selector-class">.xml</span></span><br></pre></td></tr></table></figure></p>
<p>修改为（第一个是dfs的备份数目，单机用1份就行，后面两个是namenode和datanode的目录）：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.replication<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">value</span>&gt;</span>1<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.name.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>file:///home/che/hadoopdata/hdfs/namenode<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.data.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>file:///home/che/hadoopdata/hdfs/datanode<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>修改mapred-site.xml.template<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit mapred-site<span class="selector-class">.xml</span><span class="selector-class">.template</span></span><br></pre></td></tr></table></figure></p>
<p>修改为：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.framework.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">value</span>&gt;</span>yarn<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>修改yarn-site.xml<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">sudo</span> <span class="selector-tag">gedit</span> <span class="selector-tag">yarn-site</span><span class="selector-class">.xml</span></span><br></pre></td></tr></table></figure></p>
<p>修改为：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>mapreduce_shuffle<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>初始化hadoop：<br><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs namenode -<span class="built_in">format</span></span><br></pre></td></tr></table></figure></p>
<p><img src="http://img.blog.csdn.net/20160729124539349" alt="这里写图片描述"><br>启动<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$HADOOP_HOME</span><span class="regexp">/sbin/</span>start-all.sh</span><br></pre></td></tr></table></figure></p>
<p>停止<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$HADOOP_HOME/sbin/<span class="keyword">stop</span>-<span class="keyword">all</span>.<span class="keyword">sh</span></span><br></pre></td></tr></table></figure></p>
<p>检查WebUI，浏览器打开端口8088：<a href="http://localhost:8088" target="_blank" rel="noopener">http://localhost:8088</a><br><img src="http://img.blog.csdn.net/20160729124611056" alt="这里写图片描述"></p>
<p>其他端口说明：<br>port 8088: cluster and all applications<br>port 50070: Hadoop NameNode<br>port 50090: Secondary NameNode<br>port 50075: DataNode<br>hadoop运行后可使用jps命令查看,得到结果：<br><img src="http://img.blog.csdn.net/20160729124738978" alt="这里写图片描述"></p>
<p><strong>四.安装scala</strong><br>将scala下载后手动解压文件到/home/che文件夹<br>【或者】执行：<br><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cd</span> <span class="string">/home/che</span></span><br><span class="line">tar -xzvf scala-2.11.8.tgz</span><br></pre></td></tr></table></figure></p>
<p>在/etc/profile文件的末尾添加环境变量：<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit <span class="regexp">/etc/</span>profile</span><br></pre></td></tr></table></figure></p>
<p>添加：<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="builtin-name">export</span> <span class="attribute">SCALA_HOME</span>=/home/che/scala-2.11.8</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="variable">$SCALA_HOME</span>/bin:$PATH</span><br></pre></td></tr></table></figure></p>
<p>保存并更新/etc/profile：<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">source</span> <span class="regexp">/etc/</span>profile</span><br></pre></td></tr></table></figure></p>
<p>查看是否成功：<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">scala</span> -<span class="keyword">version</span></span><br></pre></td></tr></table></figure></p>
<p><img src="http://img.blog.csdn.net/20160729124816384" alt="这里写图片描述"><br><strong>五.安装spark</strong><br>下载spark手动解压安装包到/home/che文件夹下<br>【或者】执行：<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /home/che</span><br><span class="line">tar -xzvf spark<span class="number">-2.0</span><span class="number">.0</span>-bin-hadoop2<span class="number">.7</span>.tgz</span><br><span class="line">mv spark<span class="number">-2.0</span><span class="number">.0</span>-bin-hadoop2<span class="number">.7</span> spark<span class="number">-2.0</span><span class="number">.0</span></span><br></pre></td></tr></table></figure></p>
<p>打开/etc/profile文件<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit <span class="regexp">/etc/</span>profile</span><br></pre></td></tr></table></figure></p>
<p>在/etc/profile文件的末尾添加环境变量：<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="builtin-name">export</span> <span class="attribute">SPARK_HOME</span>=/home/che/spark-2.0.0</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="variable">$SPARK_HOME</span>/bin:$PATH</span><br></pre></td></tr></table></figure></p>
<p>保存并更新/etc/profile：<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">source</span> <span class="regexp">/etc/</span>profile</span><br></pre></td></tr></table></figure></p>
<p>在conf目录下复制并重命名spark-env.sh.template为spark-env.sh：<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cd</span> <span class="variable">$SPARK_HOME</span>/<span class="keyword">conf</span></span><br><span class="line">cp spark-env.<span class="keyword">sh</span>.template spark-env.<span class="keyword">sh</span></span><br><span class="line">sudo gedit spark-env.<span class="keyword">sh</span></span><br></pre></td></tr></table></figure></p>
<p>添加：<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="builtin-name">export</span> <span class="attribute">JAVA_HOME</span>=/home/che/jdk1.8.0_101</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">SCALA_HOME</span>=/home/che/scala-2.11.9</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">SPARK_MASTER_IP</span>=master</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">SPARK_WORKER_MEMORY</span>=4G</span><br></pre></td></tr></table></figure></p>
<p>启动spark<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$SPARK_HOME</span>/sbin/start-all.sh</span><br><span class="line">jps</span><br></pre></td></tr></table></figure></p>
<p><img src="http://img.blog.csdn.net/20160729124910338" alt="这里写图片描述"><br>可以打开<a href="http://localhost:8080/看worker情况（只有启动之后才能看到）" target="_blank" rel="noopener">http://localhost:8080/看worker情况（只有启动之后才能看到）</a><br><img src="http://img.blog.csdn.net/20160729124934011" alt="这里写图片描述"></p>
<p>可以看到有一个worker，现在就可以愉快的玩耍spark啦！！！<br><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$SPARK_HOME/bin/<span class="built_in">run</span>-example SparkPi</span><br></pre></td></tr></table></figure></p>
<p>看看你有没有得到:<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Pi <span class="keyword">is</span> roughly <span class="number">3.14716</span></span><br></pre></td></tr></table></figure></p>
<p>（当时运行出来一大串代码，最后找了半天这个结果在代码中间隐藏着）</p>
<p>参考网址：<br><a href="http://blog.tomgou.xyz/spark-160-dan-ji-an-zhuang-pei-zhi.html" target="_blank" rel="noopener">http://blog.tomgou.xyz/spark-160-dan-ji-an-zhuang-pei-zhi.html</a><br><a href="http://blog.csdn.net/stark_summer/article/details/43495623" target="_blank" rel="noopener">http://blog.csdn.net/stark_summer/article/details/43495623</a></p>
<p>转载请注明文章来源及作者：会飞的星星</p>
]]></content>
      
        <categories>
            
            <category> 分布式 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> hadoop </tag>
            
            <tag> scala </tag>
            
            <tag> spark </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Win10 64位下GPU版本MXNet+Tensorflow 1.3.0的安装]]></title>
      <url>/2017/07/23/Win10%2064%E4%BD%8D%E4%B8%8BGPU%E7%89%88%E6%9C%ACMXNet+Tensorflow%201.3.0%E7%9A%84%E5%AE%89%E8%A3%85/</url>
      <content type="html"><![CDATA[<p>说明：本文记录时间为2017.7.23。在此时Tensorflow在Win下的安装要求为系统64位且Python版本为3.5（现已经支持py 3.6），MXNet在Win下只支持Python 2。<br>更新说明：在8月19日发布了Tensorflow1.3.0后，cudnn支持6.0而不再支持5.1，所以一定要选对版本哦。<br><a id="more"></a></p>
<h2 id="一-安装Anaconda"><a href="#一-安装Anaconda" class="headerlink" title="一.安装Anaconda"></a><strong>一.安装Anaconda</strong></h2><p>由于Mxnet在win下只支持Python 2，tensorflow在win下只支持Python 3.5，所以选择Anaconda创建Python2和3共存的环境。</p>
<p>###<strong>1. 安装Anaconda 2 作为主环境</strong> ###<br><strong>a. 下载Anaconda</strong>。<br>官网速度较慢，可考虑使用清华镜像 <a href="https://mirrors.tuna.tsinghua.edu.cn/help/anaconda/" target="_blank" rel="noopener">https://mirrors.tuna.tsinghua.edu.cn/help/anaconda/</a></p>
<p><strong>b. 安装。</strong><br>默认安装位置为C:\Users\Che\Anaconda2，注意需如下图所示两项都选才能将其添加到环境变量。<br><img src="http://img.blog.csdn.net/20170723105700326?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMDQ2OTEyNg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h3 id="2-安装Anaconda-3-环境"><a href="#2-安装Anaconda-3-环境" class="headerlink" title="2. 安装Anaconda 3 环境"></a><strong>2. 安装Anaconda 3 环境</strong></h3><p>有两种方式安装Anaconda 3环境 </p>
<ul>
<li><strong>●conda创建</strong><br>  在CMD命令行中使用如下代码创建名为mxnet的环境，使用的是Python 3.5版本。<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda create -n py3 python=<span class="number">3</span>.<span class="number">5</span> anaconda</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>优点：简单；缺点：联网下载包，速度慢。</p>
<ul>
<li><strong>●手动下载并安装</strong>（这种安装方式在以后的安装包的时候可能会存在问题，不建议）<ul>
<li>下载Anaconda3</li>
<li>安装Anaconda3的安装目录必须选在C:\Users\Che\Anaconda2\envs子目录下，名称“py3”可以自己取，并加在路径的最后。安装过程中注意一定取消取消掉第一个√，避免将Anaconda3添加到系统PATH路径下。<br><img src="http://img.blog.csdn.net/20170723110228857?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMDQ2OTEyNg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></li>
</ul>
</li>
</ul>
<p>优点：安装时间短。</p>
<p><strong>验证两种方式的Anaconda3环境创建成功与否：</strong></p>
<p>a. 在CMD里面直接输入<br><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python</span><br><span class="line"><span class="keyword">exit</span>()</span><br></pre></td></tr></table></figure></p>
<p>会看到启动Python 2.7，然后退出。<br><img src="http://img.blog.csdn.net/20170723110352126?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMDQ2OTEyNg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>b.使用如下代码切换到Python 3<br><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">activate py3</span><br><span class="line">python</span><br><span class="line"><span class="keyword">exit</span>()</span><br></pre></td></tr></table></figure></p>
<p>此处的”py3”即之前Python3安装目录文件夹的名字。使用activate py3命令之后，在命令行前面会出现一个[py3]标记，此时使用任何的python命令都是在Python 3.5下进行的。使用如下命令可取消激活Python 3。<br><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">deactivate py3</span><br></pre></td></tr></table></figure></p>
<p><img src="http://img.blog.csdn.net/20170723110412494?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMDQ2OTEyNg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h2 id="二-安装CUDA和cuDNN"><a href="#二-安装CUDA和cuDNN" class="headerlink" title="二.安装CUDA和cuDNN"></a><strong>二.安装CUDA和cuDNN</strong></h2><p>因为我们要安装GPU版本，所以需要 CUDA 和 cuDNN 的支持。</p>
<ol>
<li>请先在 <a href="https://developer.nvidia.com/cuda-gpus" target="_blank" rel="noopener">这里</a><strong>确认你的显卡支持 CUDA</strong>。</li>
<li>如果以上条件符合，那么可以开始从各自官网<strong>下载 CUDA 8.0 和 cuDNN V6.0的安装包</strong>。</li>
</ol>
<p><strong>CUDA:</strong> <a href="https://developer.nvidia.com/cuda-downloads" target="_blank" rel="noopener">https://developer.nvidia.com/cuda-downloads</a><br><img src="http://img.blog.csdn.net/20170723110517192?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMDQ2OTEyNg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p><strong>cuDNN:</strong> <a href="https://developer.nvidia.com/rdp/cudnn-download" target="_blank" rel="noopener">https://developer.nvidia.com/rdp/cudnn-download</a> (需要注册)</p>
<p><img src="http://img.blog.csdn.net/20170819163607045?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMDQ2OTEyNg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<ol>
<li><strong>安装CUDA</strong>。双击执行安装程序，安装后会自动添加系统变量。<br>测试安装是否成功：在CMD中输入“nvcc -V”。<br><img src="http://img.blog.csdn.net/20170723110613839?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMDQ2OTEyNg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></li>
<li><strong>安装cuDNN</strong>。解压后的另一个压缩文件文件继续解压，放到任何一个目录下（此处为D:\cuda），然后把所放的那个目录添加到Path 环境变量里。<br><img src="http://img.blog.csdn.net/20170723110631775?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMDQ2OTEyNg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br><img src="http://img.blog.csdn.net/20170723110649368?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMDQ2OTEyNg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>将下面这些文件复制到相应位置：<br>D:\cuda\bin\cudnn64_6.dll —&gt; C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v8.0\bin</li>
</ol>
<p>D:\cuda\include\cudnn.h —&gt; C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v8.0\include</p>
<p>D:\cuda\lib\x64\cudnn.lib —&gt; C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v8.0\lib\x64</p>
<h2 id="三-安装MXNet"><a href="#三-安装MXNet" class="headerlink" title="三.安装MXNet"></a><strong>三.安装MXNet</strong></h2><p>参考网址：<br><a href="https://stankirdey.com/2017/07/04/upgrading-mxnet-from-0-9-to-0-10-on-windows-10/" target="_blank" rel="noopener">https://stankirdey.com/2017/07/04/upgrading-mxnet-from-0-9-to-0-10-on-windows-10/</a><br>下载准备：<br><a href="https://github.com/yajiedesign/mxnet/releases" target="_blank" rel="noopener">https://github.com/yajiedesign/mxnet/releases</a> 上的两个文件，如图所示：</p>
<ul>
<li>VC14 – prebuildbase_win10_x64_vc14.7z</li>
<li>20170721_mxnet_x64_vc14_gpu.7z<br><img src="http://img.blog.csdn.net/20170723110759470?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMDQ2OTEyNg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>1.将下载的两个文件<strong>解压</strong>到D:\mxnet\，将之前下载的cuDNN压缩包解压到D:\mxnet\3rdparty\cudnn</li>
</ul>
<p>2.添加环境变量<strong>MXNET_HOME</strong>，值为<strong>D:\mxnet</strong></p>
<p>3.添加环境变量<strong>Path</strong>的值：<br>%MXNET_HOME%\lib;%MXNET_HOME%\3rdparty\cudnn\bin;%MXNET_HOME%\3rdparty\cudart;%MXNET_HOME%\3rdparty\opencv;%MXNET_HOME%\3rdparty\vc;%MXNET_HOME%\3rdparty\gnuwin;%MXNET_HOME%\3rdparty\openblas\bin;</p>
<p><strong>说明</strong>：第2,3步在原文中是使用setupenv.cmd文件来执行，但自己操作中发现Path值的路径出现多加斜杠的错误，所以这里采用了手动操作的方法。</p>
<p>4.添加环境变量<strong>PYTHONPATH</strong>，值为：D:\mxnet\python（这一步是因为自己后续操作发现在其他位置无法导入mxnet模块，所以这里<strong>添加python的搜索路径</strong>）</p>
<p>5.在CMD下进入D:\mxnet\python，执行<br><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python setup.py install</span><br></pre></td></tr></table></figure></p>
<p><img src="http://img.blog.csdn.net/20170723110951767?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMDQ2OTEyNg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br><img src="http://img.blog.csdn.net/20170723111001495?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMDQ2OTEyNg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br><strong>测试安装成功</strong>：<br><img src="http://img.blog.csdn.net/20170723111017195?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMDQ2OTEyNg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>到这里MXNet就安装好啦。Enjoy！</p>
<h2 id="四-安装Tensorflow"><a href="#四-安装Tensorflow" class="headerlink" title="四.安装Tensorflow"></a><strong>四.安装Tensorflow</strong></h2><p>Tensorflow官网：<a href="https://www.tensorflow.org/install/install_windows" target="_blank" rel="noopener">https://www.tensorflow.org/install/install_windows</a></p>
<p><strong>●准备工作</strong>：</p>
<ol>
<li>确保<strong>Python版本是3.5且系统为64位</strong>（非常重要）。</li>
<li>确保<strong>pip版本最新</strong>，可用python -m pip install -U pip 在CMD中升级pip 。</li>
<li>确保安装<strong>Visual Studio</strong> 2015 或者 2013 或者 2010。</li>
<li>确保已安装cuda和cuDNN。</li>
</ol>
<p><strong>●安装方式：</strong><br>由于我们是在py3子环境下安装了Python3，所以需先使用activate py3进入子环境。进入后，可使用官网提供的两种方式进行安装。</p>
<ul>
<li><p>pip</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install --upgrade tensorflow-gpu</span><br></pre></td></tr></table></figure>
</li>
<li><p>Anaconda</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install --ignore-installed --upgrade https://storage.googleapis.com/tensorflow/windows/gpu/tensorflow_gpu-<span class="number">1</span>.<span class="number">2</span>.<span class="number">1</span>-cp35-cp35m-win_amd64.whl</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>注意：</strong></p>
<p>在安装Tensorflow时很可能会出现 <strong><em>“Cannot remove entries from nonexistent file c:\program files\anaconda3\lib\site-packages\easy-install.pth”</em></strong> 的报错，这是setuptools版本太低导致。<br>解决方法：pip install –upgrade –ignore-installed setuptools</p>
]]></content>
      
        <categories>
            
            <category> 深度学习 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> MXNet </tag>
            
            <tag> Tensorflow </tag>
            
        </tags>
        
    </entry>
    
  
  
</search>
